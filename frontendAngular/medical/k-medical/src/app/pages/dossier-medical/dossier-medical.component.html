<div class="container">
  <div class="dossier-header">
    <h2>Medical Folder</h2>
  </div>
  <div class="top-sections">
    <div id="patient-info" class="patient-info">
      <div class="patient-img-container">
        <img [src]="dossier.patient.img ? 'data:image/jpeg;base64,' + dossier.patient.img : 'assets/default-avatar.png'" alt="Patient Image" class="patient-img" />
      </div>
      <div class="patient-details">
        <h3>{{ dossier.patient.nom }} {{ dossier.patient.prenom }}</h3>
        <p><strong>Date of Birth:</strong> {{ dossier.patient.dateNaissance }}</p>
        <p><strong>Address:</strong> {{ dossier.patient.adresse }}</p>
        <p><strong>Phone:</strong> {{ dossier.patient.tel }}</p>
        <p><strong>Email:</strong> {{ dossier.patient.email }}</p>
        <p><strong>Health Insurance:</strong> {{ dossier.patient.assuranceMaladie }}</p>
        <p><strong>Social Security Number:</strong> {{ dossier.patient.numeroSecuriteSociale }}</p>
      </div>
    </div>
    <div id="dossier-info" class="dossier-info">
      <h4>Dossier Details</h4>
      <p><strong>Dossier Number:</strong> {{ dossier.numDossier }}</p>
      <p><strong>Date Created:</strong> {{ dossier.patient.dateCreation }}</p>
         <div class="page-header">
           
          <div class="page-btn">
            <a class="btn btn-added" (click)="goToQuestionnaires(dossier.id)" >
              <img src="assets/img/icons/plus.svg" class="me-1" alt="img">Questionnaire
            </a>
          </div>  <div class="page-btn">
            <a class="btn btn-added" data-bs-toggle="modal" data-bs-target="#addConsultationModal">
              <img src="assets/img/icons/plus.svg" class="me-1" alt="img">Consultation
            </a>
          </div>   
        </div>
      </div>
    </div>
   <div class="tab-container">
    <ul class="tab-menu">
     
      <li class="tab-link" [class.active]="activeTab === 'questionnaire'" (click)="setActiveTab('questionnaire')">Questionnaire</li>
      <li class="tab-link" [class.active]="activeTab === 'consultations'" (click)="setActiveTab('consultations')">Consultations</li>
      <li class="tab-link" [class.active]="activeTab === 'medical-history'" (click)="setActiveTab('medical-history')">Medical History</li>
      <li class="tab-link" [class.active]="activeTab === 'medications'" (click)="setActiveTab('medications')">Medications</li>
    </ul>
    <div id="consultations" class="tab-content" [class.active]="activeTab === 'consultations'">
      <div class="consultations">
        <div class="page-header">
          <div class="page-title">
            <h4>Consultations</h4>
          </div>
          
        </div>
        
        <div class="row">
          <div class="col-12" *ngFor="let c of listConsultation">
           
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title">{{ c.docteur.nom }} {{ c.docteur.prenom }}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{ c.dateVisit | date }}</h6>
                <p class="card-text"><strong>Reason for Visit:</strong> {{ c.reason }}</p>
                <div class="page-btn">
                  <a class="btn btn-added" (click)="goToConsultatios(c.id)" >
                    <img src="assets/img/icons/eye.svg" class="me-1" alt="img">View  Details
                  </a>
                </div>
                <div class="page-btn">
                  <a class="btn btn-added" (click)="createInvoice(c.id)" >
                    <img src="../.././../assets/img/icons/dash1.svg" class="me-1" alt="img">Generate Invoice  
                  </a>
                </div>
               
               
              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div id="medical-history" class="tab-content" [class.active]="activeTab === 'medical-history'">
      <div class="medical-history">
        <h4>Medical History</h4>
        <button (click)="addNewMedicalHistory()">Add Medical History</button>
        <div class="item">
          <p>vfvfv</p>
        </div>
      </div>
    </div>
    <div id="medications" class="tab-content" [class.active]="activeTab === 'medications'">
      <div class="medications">
        <h4>Current Medications</h4>
        <button (click)="addNewMedication()">Add Medication</button>
        <div class="item">
          <p><strong>Medication Name:</strong> </p>
          <p><strong>Dosage:</strong> </p>
          <p><strong>Frequency:</strong> </p>
          <p><strong>Prescribed By:</strong> </p>
        </div>
      </div>
    </div>
    <div id="questionnaire" class="tab-content" [class.active]="activeTab === 'questionnaire'">
      <div class="questionnaire">
        <h4>Questionnaire</h4>
        <div id="questionnaire" class="tab-content" [class.active]="activeTab === 'questionnaire'">
          <div class="questionnaire">
             <div *ngIf="questionnaire">
              <p><strong>Folder Number:</strong> {{ questionnaire.dossierMedical.numDossier }}</p>
        
              <p><strong>Profession:</strong> {{ questionnaire.profession }}</p>
        
              <p><strong>Vous êtes adressé par:</strong> {{ questionnaire.adressePar }}</p>
        
              <p><strong>Nom de votre médecin:</strong> {{ questionnaire.medecinNom }}</p>
        
              <p><strong>Lieu:</strong> {{ questionnaire.lieu }}</p>
        
              <p><strong>Nombre d’enfants:</strong> {{ questionnaire.enfants }}</p>
        
              <p><strong>Prenez-vous actuellement des médicaments ?</strong> {{ questionnaire.medicaments ? 'Oui' : 'Non' }}</p>
              <p *ngIf="questionnaire.medicaments">{{ questionnaire.medicamentsDetails }}</p>
        
              <p><strong>Avez-vous des allergies connues ?</strong> {{ questionnaire.allergieConnue ? 'Oui' : 'Non' }}</p>
              <p *ngIf="questionnaire.allergieConnue"><strong>Allergies connues:</strong> {{ questionnaire.allergieDentaire }}</p>
        
              <p><strong>Avez-vous d'autres pathologies ?</strong> {{ questionnaire.autresPathologies ? 'Oui' : 'Non' }}</p>
              <p *ngIf="questionnaire.autresPathologies"><strong>Autres pathologies:</strong> {{ questionnaire.autresPathologies }}</p>
        
              <p><strong>Avez-vous subi une intervention chirurgicale récente ?</strong> {{ questionnaire.interventionChirurgicale ? 'Oui' : 'Non' }}</p>
              <p *ngIf="questionnaire.interventionChirurgicale"><strong>Détails de l'intervention :</strong> {{ questionnaire.interventionDetails }}</p>
        
              <p><strong>Adhérez-vous à une mutuelle ?</strong> {{ questionnaire.mutuelle ? 'Oui' : 'Non' }} <span *ngIf="questionnaire.mutuelle">{{ questionnaire.mutuelleAutre }}</span></p>
        
              <p><strong>Bénéficiez-vous de la CMU ?</strong> {{ questionnaire.cmu ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Référent :</strong> {{ questionnaire.referent }}</p>
        
              <p><strong>Prenez-vous des anticoagulants ?</strong> {{ questionnaire.anticoagulants ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Prenez-vous des biphosphonates ?</strong> {{ questionnaire.biphosphonates ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Souffrez-vous de tuberculose ?</strong> {{ questionnaire.tuberculose ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Souffrez-vous de diabète ?</strong> {{ questionnaire.diabete ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Souffrez-vous de cardiopathie ?</strong> {{ questionnaire.cardiopathie ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Avez-vous d'autres maladies ?</strong> {{ questionnaire.autres ? 'Oui' : 'Non' }}</p>
              <p *ngIf="questionnaire.autres"><strong>Autres maladies:</strong> {{ questionnaire.autresPathologies }}</p>
        
              <p><strong>Fumez-vous ?</strong> {{ questionnaire.fume ? 'Oui' : 'Non' }}</p>
        
              <p><strong>Consommez-vous de l’alcool ?</strong> {{ questionnaire.alcool ? 'Oui' : 'Non' }}</p>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>
</div>
<div class="modal fade" id="addConsultationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="addConsultationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addConsultationModalLabel">Add Consultation</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="addNewConsultation()">
          <div class="mb-3">
            <label for="reason" class="form-label">Reason for Visit</label>
            <input type="text" class="form-control" id="reason" [(ngModel)]="newConsultation.reason" name="reason" required>
          </div>
          <div class="mb-3">
            <label for="reason" class="form-label">Prix Consultation</label>
            <input type="number" class="form-control" [(ngModel)]="newConsultation.prixConsultation" name="prixConsultation" required>
          </div>
          <div class="mb-3">
             <input type="hidden" class="form-control" id="doctor" [(ngModel)]="idDocteur" value="{{idDocteur}}" name="doctor" required>
          </div>
          <button type="submit" class="btn btn-primary">Add Consultation</button>
        </form>
      </div>
    </div>
  </div>
</div>

 
 
